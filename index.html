
<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <title>国搜音乐-全球好声音</title>
<meta name="keywords" content="音乐,中国搜索音乐频道,国搜音乐,热门音乐,最新音乐,中国搜索" />
<meta name="description" content="音乐,中国搜索音乐频道,国搜音乐,热门音乐,最新音乐,中国搜索" />
<META name="filetype" content="0">
<META name="publishedtype" content="1">
<META name="pagetype" content="2">
<META name="catalogs" content="C_3276332">
    <style>
        html,body{width:100%;height:100%;overflow: hidden;margin: 0;padding: 0;}
        html{overflow-x: auto;}
        body{min-width: 1100px;}
        .containerFrame{width:100%;height:100%;border:0;}
    </style>
    <script>if(top!=self)top.location=self.location;</script>
    <link type="text/css" rel="stylesheet" href="http://wechat.migu.cn/weixin/chinaso/css/player.css" charset="utf-8">
    <link type="text/css" rel="stylesheet" href="http://wechat.migu.cn/weixin/chinaso/css/global.min.css" charset="utf-8">
    <script type="text/javascript" src="http://www.chinaso.com/common/base/js/jquery-1.9.1.min.js"></script>
    <script type="text/javascript" src="http://wechat.migu.cn/weixin/chinaso/js/miguplayer/common.js"></script>
    <script type="text/javascript" src="http://wechat.migu.cn/weixin/chinaso/js/miguplayer/player.flash.js"></script>
    <script type="text/javascript" src="http://wechat.migu.cn/weixin/chinaso/js/miguplayer/FlashACR.js"></script>
    <script type="text/javascript" src="http://wechat.migu.cn/weixin/chinaso/js/miguplayer/common.player.js"></script>
</head>

<body>
    <a href="http://music.chinaso.com/music_indexV2.html" style="display:none;" title="国搜音乐-全球好声音">国搜音乐-全球好声音</a>
    <iframe src="about:blank" frameborder="0" scrolling="auto" id="IdContainerFrame" name="IdContainerFrame" class="containerFrame"></iframe>
    <script type="text/javascript">
        var Router = {
            defaultUrl: "/music_indexV2.html",        // 默认加载链接，设置iframe地址
            initialize: function () {
                var self = this,
                    domMode;
                this.frame = window.g_iframe= this.getFrame();
                this.curHash = self.getHash();
                this.setFrameHref(this.curHash);
                domMode = document.documentMode;
                if (this.hasOnHashchange()) {
                    this.eventHandler();
                } else if (window.ActiveXObject) {
                   if (!domMode || 8 > domMode) {
                       this.ie7Fix();
                   }
                } else {
                   (window.history.navigationMode && (window.history.navigationMode = "compatible"), setInterval(function (e) {
                       self.freamHashchange.call(self, e);
                   }, 50));
               }
                
            },
            // IE7 hashchange 事件处理
            ie7Fix: function () {
                var self = this,
                    tempcurHash = self.curHash;                                                 // 定义临时hash值变量，用于切换判断与当前hash是否想相同
                self.saveHashFrame = self.createSaveHashFrame();
                self.saveCurHash(self.curHash);
                // 60毫秒逻辑处理，判断主窗体hash改变后更改frame地址
                setInterval(function () {
                    var frameInHash = self.saveHashFrame.contentWindow.document.body.innerText,
                        changeHash;
                    if (frameInHash != tempcurHash) {
                        tempcurHash = frameInHash;
                        window.location.hash = self.curHash = frameInHash;
                        self.setFrameHref(frameInHash);
                    } else {
                        changeHash = self.getHash();
                        if (changeHash != self.curHash) {
                            self.saveCurHash(changeHash);
                        }
                    }
                }, 60);
            },
            saveCurHash: function (curHash) {
                var self = this,
                    contentWinDoc = self.saveHashFrame.contentWindow.document;      // 获得创建frame对象
                // 写入当前hash地址
                contentWinDoc.open();
                contentWinDoc.write('<html><body>' + curHash + '<' + '/body><' + '/html>');
                contentWinDoc.close();
                self.curHash = curHash;                                             // 赋值对象hash值属性，用于切换与判断
            },
            createSaveHashFrame: function () {
                var docEle = document.createElement("body"),
                    saveHashFrame;                                                                          // 定义创建frame变量，用于返回frame实例
                docEle.innerHTML = '<iframe src="javascript:void(0)" style="display: none;"></iframe>';
                saveHashFrame = docEle.childNodes[0];                                                       // 获得创建frame元素
                document.body.appendChild(saveHashFrame);                                                   // 追加页面
                return saveHashFrame;
            },
            // 判断hashchange事件是否可用
            // 成功：返回可用函数，失败：返回IE文档模型标示
            hasOnHashchange: function() {
                var eventText = "onhashchange",             // hash更改事件名称，用于获取更改事件函数
                    eventFun = eventText in document.body;  // 根据事件名称获得事件函数，用于处理IE7兼容hashchange事件
                return eventFun || (document.body.setAttribute(eventText, "return;"), eventFun = "function" == typeof document.body[eventText]), eventFun && (void 0 === document.documentMode || document.documentMode > 7)
            },
            setFrameHref: function (hash) {                 // 设置iframe location
                var self = this,
                    url = "";                               // 拼接hash，替换frame地址
                // 判断hash是否可用，是否加载默认url。默认为首页
                if (!hash || self.defaultUrl === hash) {
                    url += self.defaultUrl;
                } else {
                    url += hash;
                }
                self.frame.contentWindow.location.replace(url);         // 防止后退时iframe切换而主窗体不切换问题
            },
            eventHandler: function () {
                var self = this;
                // 绑定window 的 hash改变事件
                // 用于切换页面内iframe 地址
                if (window.addEventListener) {
                    window.addEventListener("hashchange", function (e) {self.freamHashchange.call(self, e);});
                } else {
                    window.attachEvent("onhashchange", function (e) {self.freamHashchange.call(self, e);});
                }
            },
            getHash: function () {                     // 获得hash，去掉#字符
                var winHref = window.location.href,
                    index = winHref.indexOf("#");
                if (index === -1) {
                    return "";
                }
                return winHref.substr(index+1);
            },
            freamHashchange: function () {              // 响应hashchange事件
                var self = this,
                    hash = this.getHash();
                if (hash !== this.curHash) {            // 排除相同地址
                    this.curHash = hash;
                    self.setFrameHref(hash);
                }
            },
            getFrame: function () {
                return document.getElementById("IdContainerFrame");
            },
            dispatch: function (url, force) {                 // 改变主窗体hash
                var pathHash = this.pathToHash(url),
                    paramTag;
                if (!pathHash) {
                    return;
                }
                if (force && pathHash === this.curHash) {
                    paramTag = pathHash.indexOf("?");
                    if (paramTag > -1) {
                        paramTag = "&";
                    } else {
                        paramTag = "?";
                    }
                    pathHash += paramTag + new Date().getTime();
                }
                location.hash = pathHash;
            },
            pathToHash: function (url) {
                var splitHostReg = /^https?:\/\/.*?\//i,    // hostname
                    splitHash = /\/#\/?/i;                  // /#/ 标记
                if (!url) {
                    return "";
                }
                return url.replace(splitHostReg, "/").replace(splitHash, "");  // 截取hostname后url
            }
        };
        Router.initialize();
    </script>
<div style="display:none">
<script src="http://stat.chinaso.com/webdig.js?z=1" type="text/javascript"></script>
<script type="text/javascript">wd_paramtracker("_wdxid=000000000000000000000000000000000000000000")</script>
</div>
</body>

</html>